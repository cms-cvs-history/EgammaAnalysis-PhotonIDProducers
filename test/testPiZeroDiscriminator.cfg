
#
#  run on collection of ecal+ES rechits and calculate the pi0 Discrimination variable
#  which is stored in an AssociationMap with PhotonCollection
#
#  Notice: to write the new root file read events should be created with the same version of CMSSW
#
# authors A. Kyriakis NCSR "Demokritos" Athens
#         D. Maletic Vinca "Belgrate"
#
process PiZeroDiscriminatorProcess = 
{

  # initialize  MessageLogger
  include "FWCore/MessageLogger/data/MessageLogger.cfi"

  untracked PSet maxEvents = {untracked int32 input = -1}

  # input module. assume root file contains EcalRecHits
  source = PoolSource 
  {
    untracked vstring fileNames = {
     '/store/mc/2007/11/20/RelVal-RelValSingleGammaPt35-1195570050/0000/184F61F3-8297-DC11-BAB0-001617DBCF6A.root',
     '/store/mc/2007/11/20/RelVal-RelValSingleGammaPt35-1195570050/0000/BECF274E-8B97-DC11-95A1-001617C3B77C.root'

    }
  }

  # geometry needed for clustering
  include "RecoEcal/EgammaClusterProducers/data/geometryForClustering.cff"

 # ES cluster for pi0 discrimination variables
  include "RecoEcal/EgammaClusterProducers/data/preshowerClusterShape.cfi"

  # pi0 discrimination variables
  include "EgammaAnalysis/PhotonIDProducers/data/piZeroDiscriminators.cfi"


  # create path with all clustering algos
  path p = { preshowerClusterShape, piZeroDiscriminators  }


  # output module so store ony (super)clusters and MC truth
  module o2 = PoolOutputModule
  {
     untracked string fileName = "/tmp/akyriaki/SingleGamma_Pt35_NNout.root"
     untracked vstring outputCommands =
     {
       "keep *"
     }
  }

  # print event number
  module counter = AsciiOutputModule {}

  endpath outpath = { counter, o2 }
}
